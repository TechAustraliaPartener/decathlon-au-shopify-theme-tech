/**
 * Color Palette
 *
 * Variable names are based on similar CSS extended color keyword values.
 *
 * @see https://www.w3.org/TR/2018/REC-css-color-3-20180619/#svg-color
 */

$color-black: #2a2b2c;
$color-blue: #0082c3;
$color-darkgray: #464646;
$color-gray: #acb3b8;
$color-light-gray: rgba(172, 179, 184, 0.5);
$color-lime: #cbfb00;
$color-silver: #f3f3f3;
$color-white: #fff;
$color-red: #e53322;

/**
 * Border Width
 */

$border-width-sm: 1px;
$border-width-md: 2px;
$border-width-lg: 3px;
$border-width-xl: 6px;

/**
 * Media Queries
 */

$breakpoint-sm: 30em;
$breakpoint-md: 40em;
$breakpoint-lg: 60em;
$breakpoint-xl: 80em;

/**
 * Transitions
 *
 * 1. $transition-speed-normal value must match the value in
 *    associated JS (in milliseconds, with setTimeout) for transition duration
 *    @see scripts/product-page/drawer.js
 */

$transition-speed-fast: 0.1s;
$transition-speed-normal: 0.2s; /* 1 */
$transition-easing-smooth: cubic-bezier(0.77, 0, 0.175, 1);

/**
 * Sizes
 */

$header-height-sm: 46px;
$header-height-md: 52px;

figure {
  margin: 0;
}

/**
 * Product Page Wrapper
 */

.de-Wrapper {
  padding-left: 1rem;
  padding-right: 1rem;
}

/**
 * Full width Wrapper modifier
 *
 * Full width container inside a limited width parents. No calc() needed.
 * @see https://css-tricks.com/full-width-containers-limited-width-parents/#article-header-id-6
 */

/*
 * 1. Offset by .01 so that media query range does not overlap with other media queries
 */
@media (max-width: $breakpoint-lg - .01 /* 1 */) {
  .de-Wrapper--fullwidth {
    left: 50%;
    margin-left: -50vw;
    margin-right: -50vw;
    position: relative;
    right: 50%;
    width: 100vw;
  }
}

/*
 * ProductFlag
 */

.de-ProductFlag {
  line-height: 1.2;
  padding: 0.38125em 0.75375em;
  position: absolute;
  right: 0;
  text-transform: uppercase;
  top: 0;
  z-index: 1;
}

/**
 * ProductMenu
 *
 * 1. The height in pixels of the fixed position, `de-PageWrap-header` element,
 *    which is the element that this component must "stick" beneath.
 * 2. Setting the `z-index` value to `1999` ensures the product menu will display
 *    below the 'Drawer' overlay which has a z-index of `2000`, while at the
 *    same time making it more difficult for other elements to appear on top of
 *    the sticky `ProductMenu` component.
 * 3. This component is not intended to be displayed for small screens. Setting
 *    display none here because of known "issue" with `de-u-hidden` not working
 *    well with responsive display flex utilities.
 *
 * Note: position sticky is not supported in IE11. This component will degrade
 * gracefully and the non-sticky experience has been deemed acceptable for
 * this component.
 */

.de-ProductMenu {
  background-color: $color-white;
  border-bottom: $border-width-sm solid $color-light-gray;
  border-top: $border-width-sm solid $color-light-gray;
  display: none; /* 3 */
  justify-content: center;
  position: -webkit-sticky;
  position: sticky;
  top: 58px; /* 1 */
  z-index: 1999; /* 2 */
}

@media (min-width: $breakpoint-md) {
  .de-ProductMenu {
    display: flex;
  }
}

/**
 * Using viewport width units provides an ideal flexible padding between
 * menu items and padding is incremented as the browser width changes. The
 * numerical value is one of pure aesthetic preference and may need to be
 * adjusted in the future.
 */

.de-ProductMenu .de-MenuBar-action {
  padding-left: 2vw;
  padding-right: 2vw;

  @media (min-width: $breakpoint-lg) {
    padding-left: 3vw;
    padding-right: 3vw;
  }

  @media (min-width: $breakpoint-xl) {
    padding-left: 4vw;
    padding-right: 4vw;
  }
}

.de-ProductMenu .de-MenuBar-action.de-is-active {
  color: $color-blue;
}

/**
 * Pseudo-element for underline
 */

.de-ProductMenu .de-MenuBar-action.de-is-active:after {
  display: block;
}

/**
 * 1. This is overriding a patterns/toolkit property.
 *
 * @TODO:
 * - move to MenuBar patterns
 */

 .de-ProductMenu .de-MenuBar--noAction:after {
  display: none !important;
}

/**
 * A unique solution for anchor links for use when fixed or sticky menus are
 * present. Adding this class to an element directly preceding the element, or
 * as the first-child inside of the element you'd like to link to, will ensure
 * the context does not become hidden behind the fixed/sticky header element.
 *
 * The method of assigning a negative integer for margin, and the same
 * (non-negative) integer for padding ensures that a gap in the content does
 * not exist.
 *
 * @see: https://css-tricks.com/hash-tag-links-padding
 *
 * 1. The value `130px` was determined by adding the height of both the primary
 *    navigation and the product page sticky menu plus a tiny bit extra for a
 *    more comfortable anchor navigation experience - making it a bit of a
 *    magic number
 */
.de-ProductAnchor {
  display: block;
  margin-top: -130px;
  padding-top: 130px;
}

/**
 * ProductInfoSection
 */

.de-ProductInfoSection {
  border-top: $border-width-xl solid $color-silver;
}

.de-ProductInfoSection:last-of-type {
  border-bottom: $border-width-xl solid $color-silver;
}

@media (min-width: $breakpoint-md) {
  .de-ProductInfoSection {
    border: 0;
  }
}

.de-ProductInfoSection--silver {
  background-color: $color-white;
}

@media (min-width: $breakpoint-md) {
  .de-ProductInfoSection--silver {
    background-color: $color-silver;
  }
}

.de-ProductInfoSection--withBorderTop {
  border: 0
}

@media (min-width: $breakpoint-md) {

  .de-ProductInfoSection--withBorderTop {
    border-top: $border-width-md solid $color-silver;
  }
}

.de-ProductInfoTitle {
  border-bottom: $border-width-lg solid $color-lime;
  margin: 0;
  padding-bottom: 5px;
}

/**
 * Sub brand logos
 *
 * 1. Warning: Magic numbers at work.
 *
 * @TODO
 * Consider moving width and height values to SVG
 */

.de-LogoSportsBrand {
  height: 100%;
  height: 22px; /* 1 */
}

.de-DecathlonChatBubble {
  width: 124px;
}

.ProductFeature-icon {
  filter: grayscale(1);
  flex: 0 1 content;
  max-width: 40px;
  min-width: 40px;
  width: 40px;
}

/**
 * StorePickup
 *
 * This CSS is in-progress and will be improved upon and commented on in
 * a follow-up PR
 */

.StorePickup-header {
  border-bottom: $border-width-md solid $color-silver;
}

.StorePickup-thumbnail {
  flex: 0 0 80px;
}

.StorePickup-tile {
  border-bottom: $border-width-sm solid $color-silver;
  margin-bottom: 0.75rem;
  padding-bottom: 0.75rem;
}

.StorePickup-tile:last-of-type {
  border-bottom: $border-width-md solid $color-lime;
  margin-bottom: 0;
}

/**
 * Utilities
 *
 * @TODO
 * 1. Update patterns library with this class
 */

.de-u-textRed {
  /* 1 */
  color: $color-red !important;
}

.de-u-textLower {
  text-transform: lowercase !important;
}

.de-u-textSelectNone {
  -moz-user-select: none !important;
  -ms-user-select: none !important;
  -webkit-user-select: none !important;
  user-select: none !important;
}

/**
 * @TODO
 * 1. This probably doesn't need to be a utilty class any more. Find usage
 *    and investigate if `de-Wrapper--fullwidth` can be used instead.
 */

.de-u-fullwidth {
  left: 50%;
  margin-left: -50vw;
  margin-right: -50vw;
  position: relative;
  right: 50%;
  width: 100vw;
}

.de-u-overflowYHidden {
  overflow-y: hidden !important;
}

.de-u-overflowXNone {
  overflow-x: hidden !important;
}

/**
 * Duplicate utility exists in store-finder.scss
 *
 * 1. Consolidate by moving to pattern library utility before launching
 *    product page.
 */

.de-u-cursorPointer {
  cursor: pointer; /* 1 */
}

.de-u-cursorGrab {
  cursor: grab;
}

.de-u-textUnderline {
  text-decoration: underline !important;
}

/**
 * ProductInformation
 */

.ProductInformation {
  columns: 370px 3;
  column-gap: 36px;
}

/**
 * 1. For a single spec section, avoid splitting content across columns by adding
 *    dispaly: inline-block
 */
.ProductInformation-entry {
  break-inside: avoid;
  display: inline-block; /* 1 */
  margin-bottom: 2rem;
}

/**
 * 1. To preserve 3-column layout for multiple spec sections, set sections back to
 *    display: block
 */
.ProductInformation--multispec .ProductInformation-entry {
  display: block; /* 1 */
}

@media (min-width: $breakpoint-md) {
  .ProductInformation-entry:not(:first-of-type) {
    margin-top: 3rem;
  }
}

/**
 * Size Guide
 */

@media (min-width: $breakpoint-md) {
  .de-SizeGuide .de-is-inPageFlow {
    display: none;
  }
}

.SizeGuide-table {
  overflow-x: auto;

  .esc-size-guide--row:first-child {
    background: $color-silver;
    font-family: "avalon_mediumbold","HelveticaNeue","Helvetica Neue",Helvetica,Arial,sans-serif;
  }

  .esc-size-guide--row:nth-child(2n+3) {
    background: #f9f9f9;
  }

  .esc-size-guide--cell,
  .esc-size-guide--heading {
    text-align: center;
  }

  .esc-size-guide--heading {
    text-transform: uppercase;
  }

  /**
   * @TODO
   * 1. It it best to avoid tag selectors when possible. Investigate
   * opportunities for replacing `p` with class name selector
   */

  p,
  .esc-size-guide--title,
  .esc-size-guide--cell-type--text {
    font-size: 16px;
  }
}

/**
 * ProductBackToTop
 *
 * 1. The desired visual height for the element. Visually dependant on this
 *    component's border-radius value.
 * 2. The desired border-radius value for the component. Visually dependant on
 *    this component's height value. Border-radius does not accept unitless
 *    values however this value is being used in calc() function, so the
 *    unitless value is required.
 * 3. Ensures the underlined focus style does not touch the elements
 *    left and right edges.
 **/

$ProductBackToTop-height: 32px; /* 1 */
$ProductBackToTop-border-radius: 1.75; /* 2 */

.ProductBackToTop {
  display: none;
  height: $ProductBackToTop-height;
  justify-content: center;
  margin-top: $ProductBackToTop-height;
}

@media (min-width: $breakpoint-md) {
  .ProductBackToTop {
    display: flex;
  }
}

.ProductBackToTop-middle {
  background: $color-silver;
  border-radius: ($ProductBackToTop-height / $ProductBackToTop-border-radius)
    ($ProductBackToTop-height / $ProductBackToTop-border-radius) 0 0;
  color: $color-blue;
  cursor: pointer;
  display: inline-block;
  height: $ProductBackToTop-height;
  line-height: $ProductBackToTop-height;
  padding: 0 $ProductBackToTop-height;
  user-select: none;
}

.ProductBackToTop-middle:hover {
  color: $color-darkgray;
}

.ProductBackToTop-middle:focus {
  outline: none;
}

.ProductBackToTop-middle:focus::after {
  border-bottom: $border-width-lg solid $color-darkgray;
  bottom: $border-width-lg;
  content: "";
  display: block;
  margin: 0 auto;
  position: relative;
  width: 96%; /* 3 */
}

.ProductBackToTop-left,
.ProductBackToTop-right {
  background: $color-silver;
  display: inline-block;
  height: $ProductBackToTop-height;
  width: $ProductBackToTop-height;

  &::before {
    content: "";
    background: $color-white;
    display: block;
    height: 100%;
    width: 100%;
  }
}

.ProductBackToTop-left::before {
  border-bottom-right-radius: (
    $ProductBackToTop-height / $ProductBackToTop-border-radius
  );
}

.ProductBackToTop-right::before {
  border-bottom-left-radius: (
    $ProductBackToTop-height / $ProductBackToTop-border-radius
  );
}

/**
 * Customer Fulfillment Options
 */

.de-ProductFulfillment {
  border-bottom: 0;
}

@media (min-width: $breakpoint-lg) {
  .de-ProductFulfillment {
    border-bottom: $border-width-lg solid $color-lime;
  }
}

.de-ProductFulfillment-option {
  padding: 0.35rem 0;
}

/**
 * Button
 *
 * There is a lack of consistency of button styles across decathlon.com and a
 * button pattern does not exist in the pattern library. At some point a button
 * pattern should be created.
 *
 * `de-Button` is being added to address some global concerns related to
 * different styles associated with states such as `disabled`. At some point
 * refactoring and introducing `de-Button` into the pattern library should
 * be considered.
 */

$button-background-hover: #429dd7;

.de-Button {
  -moz-user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
  background-color: $color-blue;
  border: $border-width-md solid $color-blue;
  color: $color-white;
  user-select: none;
}

.de-Button:hover {
  background-color: $button-background-hover;
  border-color: $button-background-hover;
}

.de-Button[disabled] {
  background-color: $color-gray;
  border-color: $color-gray;
  color: $color-white;
  cursor: not-allowed;
}

/**
 * ProductQuantity
 *
 * 1. Adds `display: flex` for browsers (IE11) that don't support
 *    `display: grid'
 * 2. Adds `display: grid` for modern browsers
 * 3. `72px` is the desired visual width for the quantity input
 * 4. Allows the height of the input to match the button
 * 5. Enables button to fill remaining space for browsers (IE11) that don't
 *    support `display: grid`
 * 6. `16px` is the desired visual gap between the quantity input and the
 *    Add to Cart button. Also 2x the `SwatchObjects-item` gap
 */

@media (min-width: $breakpoint-md) {
  .de-AddToCartActions {
    display: flex; /* 1 */
  }

  @supports (display: grid) {
    .de-AddToCartActions {
      display: grid; /* 2 */
      grid-template-columns: 72px 1fr; /* 4 */
    }
  }
}

.de-ProductQuantity {
  flex: 0 1 72px; /* 3 */
}

.de-ProductQuantity-input {
  border: $border-width-md solid $color-gray;
  height: 100%; /* 4 */
}

@media (min-width: $breakpoint-md) {
  .de-ProductAddToCart {
    flex: 1 0 auto; /* 5 */
    margin-left: 16px; /* 6 */
  }
}

.ContentHeading {
  border-bottom: $border-width-md solid $color-silver;
  margin-bottom: 1rem;
}

.ContentHeading--blue {
  border-color: $color-blue;
}

/**
 * Additional Videos
 */

@media (min-width: $breakpoint-lg) {
  .de-AdditionalVideos {
    margin: 0 auto;
    max-width: 72vw;
  }
}

/**
 * Legacy style overrides
 */

/*
 * Override existing style property with a higher level of specificity.
 * A visual bug is present due to styles associated with styles attached to
 * `.template-product .addToCartForm::after` located in timber.scss.
 * We are overriding this style here with the `!important` tag as a last
 * resort effort to fix the issue without modifying the offending stylesheet
 * with our own prefixed class name.
 */

.template-product .de-addToCartForm::after {
  display: none;
}

/*
 * Legacy breadcrumb styles
 *
 * 1. The legacy breadcrumb styles inherit an undesirable margin-bottom
 *    property when in use on product pages. The following `1em` value sets
 *    the desired visual gap between the breadcrumb component and the buy box.
 */

.template-product .breadcrumb {
  margin-bottom: 1em;
}

.template-product .addToCart {
  float: none;
  margin-right: 0;
}


/*
 * ProductTitleLockup
 */

.de-ProductTitleLockup {
  position: relative;
}

@media (min-width: $breakpoint-lg) {
  .de-ProductTitleLockup {
    border-bottom: $border-width-sm solid $color-silver;
  }
}

@media (min-width: $breakpoint-lg) {
  .de-ProductTitleLockup-rating {
    bottom: 15px;
    position: absolute;
    right: 0;
  }
}

.de-ProductTitleLockup-price {
  display: none;
}

@media (min-width: $breakpoint-lg) {
  .de-ProductTitleLockup-price {
    display: flex;
  }
}

/**
 * Product Buy Box
 * 1. 50vw is a magical number that allows the add to cart button to
 * appear "above the fold" with a high percentage of perdicatability
 */

@media (min-width: $breakpoint-lg) {
  .de-ProductBuyBox {
    flex: 1 0 50vw;
    padding-left: 2rem;
  }

  .ProductMoreInfo {
    border-bottom: $border-width-lg solid $color-lime;
  }
}

/**
 * 1. 43.333% is a magical number that allows the add to cart button to
 * appear "above the fold" with a high percentage of perdicatability
 */

@media (min-width: $breakpoint-xl) {
  .de-ProductBuyBox {
    flex: 1 0 43.333%; /* 1 */
  }
}

/* Accordion */

.de-Accordion-header {
  align-items: center;
  appearance: none;
  background-color: $color-white;
  border: 0;
  cursor: pointer;
  display: flex;
  font: inherit;
  font-family: avalon_mediumbold;
  justify-content: space-between;
  margin: 0;
  padding: 0.5rem 1rem;
  text-align: left;
  width: 100%;
}

@media (min-width: $breakpoint-md) {
  .de-Accordion-header {
    display: none;
  }
}

.de-Accordion-header:focus {
  outline: $border-width-md solid $color-blue;
  outline-offset: -3px;
}

.de-Accordion-content {
  padding: 0 1rem;
}

/*
 * 1. Conditionally show accordion content when in a drawer
 *    @see scripts/product-page/drawer.js
 */

.de-is-drawerOpen .de-Accordion:not(.de-is-open) .de-Accordion-content {
  display: block; /* 1 */
}

/*
 * 1. Display the title that is normally hidden at small viewport widths whenever
 *    the drawer is open. The drawer and accordion are coupled because the drawer
 *    may display the same content that is included as an accordion section. The
 *    dynamic class 'de-is-drawerOpen' is added to a parent, wrapper element.
 */

.de-is-drawerOpen .de-ProductInfoTitle {
  display: inline-block !important; /* 1 */
}

@media (min-width: $breakpoint-md) {
  .de-Accordion-content {
    padding: 0;
  }
}

.de-Accordion:not(.de-is-open) .de-Accordion-content {
  display: none;
}

@media (min-width: $breakpoint-md) {
  .de-Accordion-content {
    display: block !important;
  }
}

.de-Accordion-indicator {
  font-size: calc(2msu * 1em);
  transform-origin: center;
  transition: 0.2s linear transform;
}

.de-Accordion.de-is-open .de-Accordion-indicator {
  transform: rotate(-45deg);
}

.de-ReviewSummary {
  border-bottom: $border-width-sm solid $color-silver;
}

/**
 * @pattern StarRating
 * Consider converting this into a pattern in the future.
 */

.de-StarRating,
.de-StarRating-fill {
  background-position: left;
  background-repeat: no-repeat;
  background-size: auto 100%;
}

.de-StarRating {
  background-image: url("stars.svg");
  height: 1.2em;
  position: relative;
  margin: 0;
  width: 6em;
}

.de-StarRating-fill {
  background-image: url("stars-fill.svg");
  height: 100%;
  left: 0;
  position: absolute;
  top: 0;
  width: 100%;
}

/**
 * ReviewMatrix
 * @TODO
 * 1. Consider refactoring/revising if `ReviewMatrix` has no styling
 */

.de-ReviewMatrix-stars {
  flex: 0 1 auto;
}

/**
 * @TODO:
 * 1. Remove reliance on fixed pixel value
 */

.de-ReviewMatrix-graph {
  display: block;
  height: 25px; /* 1 */
  width: 100%;
}

/**
 * @pattern ReviewMatrix
 * Consider converting this into a pattern in the future.
 */

.de-CustomerReview {
  border-bottom: $border-width-sm solid $color-silver;
}

.de-CustomerReview:last-of-type {
  border-bottom: 0;
}

/**
 * 1. The second step in the Decathlon pattern library modular scale
 */

.de-CustomerReview-response {
  border-left: $border-width-lg solid $color-lime;
  padding-left: 1.424rem; /* 1 */
}

.de-CustomerReview-title {
  align-items: baseline;
  display: flex;
  flex-direction: column;
}

.de-is-inPageFlow .de-CustomerReview-title {
  @media (min-width: $breakpoint-lg) {
    flex-direction: row;
  }
}

.de-is-inPageFlow .de-ReviewsContainer-reviewSummary {

  @media (min-width: $breakpoint-md) {
    flex-basis: auto;
    width: 50%;
  }

  @media (min-width: $breakpoint-lg) {
    padding-right: 1rem;
    width: 33.33333%;
  }
}

/**
 * 1. `2.0227` is the sixth step in the modular scale in use by the pattern library.
 */

.de-ReviewsContainer-reviews {
  padding-top: 2.027rem; /* 1 */
}

/**
 * 1. `2.0227` is the sixth step in the modular scale in use by the pattern library.
 */

.de-is-inPageFlow .de-ReviewsContainer-reviews {

  @media (min-width: $breakpoint-md) {
    flex-basis: auto;
    padding-left: 2.027rem; /* 1 */
    padding-top: 0;
    width: 50%;
  }

  @media (min-width: $breakpoint-lg) {
    width: 66.66667%;
  }
}

.de-ReviewsContainer-featuredImage {
  display: none;
}

.de-is-inPageFlow .de-ReviewsContainer-featuredImage {
  @media (min-width: $breakpoint-md) {
    display: block;
    width: 100%;
  }
}

.de-is-inPageFlow .de-ReviewMatrix-reviewBtn {
  display: block;
}
.de-is-drawerOpen .de-ReviewMatrix-reviewBtn {
  display: none;
}

/**
 * @TODO
 * 1. since this is related to videos, there is probably a better name for
 *    `de-ProductPhoto`. Perhaps `de-ProductVideoPoster`.
 */

 .de-ProductPhoto {
  overflow: hidden;
  position: relative;
}

.de-watch-video-button {
  cursor: pointer;

  /**
   * @TODO
   * 1. It it best to avoid tag selectors when possible. Investigate
   * opportunities for replacing `svg` with class name selector
   */

  svg {
    vertical-align: middle;
  }
}

/**
 * @TODO
 * 1. since this is related to videos, there is probably a better name for
 *    `de-thumb`. Perhaps `de-ProductVideoThumb`.
 */

.de-thumb {
  padding: 10px;
}

/**
 * 1. Hides the element until it is initialized/loaded
 * 2. Required so the element doesn't collapse on itself during loading
 */

.de-slick--videos {
  opacity: 0; /* 1 */
  height: 100%; /* 2 */
}

/**
 * 1. Displays the element once initialized
 * 2. Adding a quick transitions makes the experience less jaring
 */

.de-slick--videos.slick-initialized {
  opacity: 1; /* 1 */
  transition: opacity $transition-speed-fast ease-in; /* 2 */
}

.de-slick--videos-thumbnails {
  margin-left: -10px;
}

@media (max-width: $breakpoint-md) {
  .de-slick--videos {
    margin: auto;
  }
  .de-slick--videos-thumbnails {
    display: none;
  }
  .de-thumb {
    padding: 40px 80px;
  }
}

/*
 * @pattern Slide-in Drawer
 * Consider converting this into a pattern in the future.
 *
 * A slide-in overlay pattern, suitable for displaying additional content,
 * equipped with `overflow-y` scrolling.
 *
 * Placing content inside of this pattern is often not the most appropriate
 * choice for displaying content and can lead to poor user experiences when used
 * improperly. Consider usage of this pattern wisely.
 *
 * 1. Ensures element is not overlapped by `Drawer-header`
 * 2. Fixed positioning is required for both the `transform` and `overflow-y`
 * scrolling to work properly.
 * 3. Places the component off-canvas an equal distance to the available
 * viewport width. Necessary for the "slide-in/slide-out" effect
 */

/**
 * Base Drawer overlay styles
 */

.de-Drawer-overlay {
  background-color: rgba(172, 179, 184, 0.5);
  opacity: 0;
  position: absolute;
  transition: opacity $transition-speed-normal $transition-easing-smooth;
}

/**
 * Styles for the overlay behind the Drawer when it is open
 *
 * 1. This value is one below the .de-Drawer z-index to make sure the overlay
 *    falls beneath the Drawer content
 */

.de-Drawer.de-is-active .de-Drawer-overlay {
  height: 100%;
  left: 0;
  opacity: 1;
  top: 0;
  width: 100%;
  z-index: 1999; /* 1 */
}

/**
 * Apply these properties to drawer content that isn't currently being
 * displayed in regular page flow
 */

.de-Drawer:not(.de-is-inPageFlow) .de-Drawer-contentWrapper {
  background-color: $color-white;
  height: 100%;
  max-width: 90%;
  padding-top: $header-height-sm; /* 1 */
  position: fixed; /* 2 */
  right: 0;
  top: 0;
  transform: translateX(100vw); /* 3 */
  transition: transform $transition-speed-normal $transition-easing-smooth;
  width: 100vw;
  z-index: 2000;
}

@media (min-width: $breakpoint-md) {
  .de-Drawer:not(.de-is-inPageFlow) .de-Drawer-contentWrapper {
    max-width: 70%;
  }
}

@media (min-width: $breakpoint-lg) {
  .de-Drawer:not(.de-is-inPageFlow) .de-Drawer-contentWrapper {
    max-width: 50%;
  }
}

/**
 * 1. A magic number is being used to acheive a specific visual goal of
 *    exactly covering another element, no-more, no-less.
 */

@media (min-width: $breakpoint-xl) {
  .de-Drawer:not(.de-is-inPageFlow) .de-Drawer-contentWrapper {
    max-width: 48.5%; /* 1 */
  }
}

/**
 * Disable timed transitions for drawers that will show
 * content also shown in regular page flow.
 * The extra class applied to these drawers will be managed at the appropriate
 * time by JavaScript
 *
 * Allows the "displays_in_page_flow" content option to transition smoothly
 * when opening and closing, same as the standard drawer
 * (whose position is never switched to "static")
 */

.de-Drawer--contentFromPageFlow.de-is-closed .de-Drawer-contentWrapper,
.de-Drawer--contentFromPageFlow.de-is-opening .de-Drawer-contentWrapper {
  transition: transform 0s;
}

/**
 * Re-enable default transition duration for the "displays_in_page_flow" drawer
 * option, when also in active (open) state
*/

.de-Drawer--contentFromPageFlow.de-is-open .de-Drawer-contentWrapper {
  transition: transform $transition-speed-normal;
}

/*
 * 1. When "active", slide the component into the viewport
 */

.de-Drawer.de-is-active .de-Drawer-contentWrapper {
  transform: translateX(0); /* 1 */
}

/*
 * Switch to static positioning for keeping drawer content in page flow, when
 * using the is-in-page-flow option
 */

.de-Drawer.de-is-inPageFlow .de-Drawer-contentWrapper {
  position: static;
}

.de-Drawer-header {
  border-bottom: $border-width-sm solid $color-light-gray;
  display: flex;
  height: $header-height-sm;
  left: 0;
  letter-spacing: 0.5px;
  position: absolute;
  top: 0;
  width: 100%;
  z-index: 3000;
}

@media (min-width: $breakpoint-md) {
  .de-Drawer-header {
    height: $header-height-md;
  }
}

/*
 * Hide the header for content that is being displayed in page flow
 */

.de-Drawer.de-is-inPageFlow .de-Drawer-header {
  display: none;
}

/*
 * 1. Enables momentum-based scrolling, where the content continues to scroll
 *    for a while after finishing the scroll gesture and removing your finger
 *    from the touchscreen. The speed and duration of the continued scrolling
 *    is proportional to how vigorous the scroll gesture was. Also creates a
 *    new stacking context. Support: Safari iOS.
 *
 * @see https://developer.mozilla.org/en-US/docs/Web/CSS -webkit-overflow-scrolling
 *
 * 2. Matches the padding added when using the utility class '.de-u-pad'
 *
 * Applies only to drawer content displayed in an open drawer, not when
 * displayed in regular page flow
 */

.de-Drawer:not(.de-is-inPageFlow) .de-Drawer-content {
  height: 100%;
  overflow-y: scroll;
  padding: 1rem; /* 2 */
  -webkit-overflow-scrolling: touch; /* 1 */
}

/*
 * 1. Ensures the last direct descendant of `Drawer-content` receives spacing at
 *    the bottom of the scrollable content equal to the height
 *    of`Drawer-header`
 *
 * @TODO - Consider any future ways to reduce specificity here
 */

.de-Drawer:not(.de-is-inPageFlow) .de-Drawer-content > *:last-child {
  margin-bottom: 0; /* 1 */
  padding-bottom: $header-height-sm; /* 1 */
}

/*
 * State Classes
 */

/*
 * 1. Prevents unwanted scrolling of content
 */

.de-content-is-fixed {
  overflow: hidden; /* 1 */
  position: fixed; /* 1 */
}

/**
 * Product Carousel
 *
 * 1. Fixes issue in Edge (and probably IE) where it would overflow its parent
 */

 .de-CarouselContainer {
  position: relative;
  width: 100%; /* 1 */
}

.de-ProductCarousel--large,
.de-CarouselContainer,
.de-CarouselThumbnail,
.de-CarouselFeature-image[src=''] {
  display: none;
}

.de-CarouselContainer.de-is-active,
.de-CarouselFeature-image {
  display: flex;
}

.de-CarouselFeature,
.de-CarouselFeature-image {
  width: 100%;
}

.de-CarouselFeature-slide,
.de-CarouselFeature-image {
  cursor: grab;
}

.de-CarouselFeature-btn {
  display: flex;
  margin: 0 auto;
  position: relative;
  width: 100%;
}

.de-CarouselContext {
  display: flex;
  overflow-x: auto;
}

.de-CarouselFeature-image {
  height: 100%;
  left: 0;
  position: absolute;
  top: 0;
  width: 100%;
}

/**
 * 1. Hides all carousel slides on initial page load,
 *    preventing them from overflowing down the page
 * 2. Shows the first carousel while page is loading
 */

.de-CarouselFeature-slide {
  display: none; /* 1 */
  &:first-child {
    display: block; /* 2 */
  }
}

/**
 * 1. Once Slick Carousel has initialized, allow all slides to show
 */

.de-CarouselFeature.slick-initialized {
  .de-CarouselFeature-slide {
    display: block; /* 1 */
  }
}

/* Fix for "sliver" of next image showing in product image carousel */

.de-ProductCarousel,
.de-CarouselContainer {
  overflow: hidden;
}

.de-CarouselFeature {
  .slick-slide {
    position: relative;
    padding-right: 2px;
    right: -1px;
  }
}

/**
 * .01em is to prevent this media query from overlapping with
 * min-width media queries
 */

@media (max-width: $breakpoint-lg - .01em) {

  /**
   * 1. Restricts image sizes from becoming too large;
   *    a preventive measure to help buybox remains above-the-fold
   */

  .de-CarouselFeature-btn {
    max-width: 528px; /* 1 */
  }

  /**
   * 1. Setting and unsetting of this property is to take advantage
   *    the shared properties `.de-CarouselFeature-btn`, `.de-CarouselFeature-image`
   */

  .de-CarouselContainer {
    max-width: unset; /* 1 */
  }
}

@media (min-width: $breakpoint-lg) {

  /**
   * 1. Allows space for .de-ProductBuyBox;
   *    maintains sizing while .de-Drawer is open
   */

  .de-ProductCarousel--large {
    display: block;
    width: 50vw;  /* 1 */
  }

  .de-CarouselContainer.de-is-active {
    justify-content: flex-end;
    position: relative;
  }

  /**
   * 1. Allows space for .de-CarouselThumbnail, plus a 1% gap.
   * 2. Prevents slides to show before Slick Carousel is initiated.
   */

  .de-CarouselFeature.de-is-active {
    padding-left: 17%; /* 1 */
    overflow: hidden; /* 2 */
  }

  /**
   * 1. Allows height to match container's own,
   *    with a width less than the padding of .de-CarouselFeature.
   */

  .de-CarouselThumbnail {
    display: block;
    height: 100%;
    left: 0;
    overflow: hidden;
    position: absolute;
    top: 0;
    width: 16%; /* 1 */
  }

  /**
   * 1. Allows space for .de-CarouselFeature;
   *    8vw is derived by 50vw * 0.16.
   *    7.8vw helps maintain a more "squarish" ratio at smaller viewport widths
   *    50vw is the container size, 16% is permitted thumbnails width.
   *    Value is applied to both width/height to respect square aspect ratio.
   */

  .de-CarouselThumbnail-image {
    border: $border-width-md solid transparent;
    height: 7.8vw; /* 1 */
    object-fit: cover;
    object-position: center;
    width: 7.8vw; /* 1 */
  }

  .slick-vertical .slick-slide {
    border: $border-width-md solid transparent;
  }

  .de-SlickSlide.slick-current {
    border: $border-width-md solid $color-blue;
  }

  /*
   * 1. The current slide/image already gets a custom outline, so this
   *    is to remove the outline (for this slide only) now that the slides
   *    get tab focus
   */

  .de-SlickSlide.slick-current .de-CarouselThumbnail-btn {
    outline: none; /* 1 */
  }
}

.de-CarouselControls--overlay {
  bottom: 0;
  position: absolute;
}

/**
 * Product SwatchObjects
 */

/**
 * Default width for each swatch selector. Used for flex fallback and in grid
 * layout used on small and medium screens
 */

$swatchObjects-basis-value: 88px;

/**
 * @pattern SwatchObjects
 * Consider converting this into a pattern in the future.
 *
 * 1. Provides suitable layout for browsers that do not support Grid
 * 2. Creates overflow scrolling for small screens
 * 3. Makes scrolling buttery smooth
 * 4. Aligns content with container when Grid is not supported
 */

$swatchObjects-item-unavailable-opacity: 0.4;

.de-SwatchObjects {
  -webkit-overflow-scrolling: touch; /* 4 */
  display: flex; /* 1 */
  overflow-x: scroll; /* 2 */
  padding-left: 1rem; /* 3 */
  z-index: 1;
}

/**
 * 1. Provides suitable fallback for browsers that do not support Grid
 */

@media (min-width: $breakpoint-lg) {
  .de-SwatchObjects {
    flex-wrap: wrap; /* 1 */
    overflow-x: visible; /* 1 */
    padding-left: 0;
  }
}

/**
 * 1. Enables equal height for all new rows
 */

@supports (display: grid) {
  .de-SwatchObjects {
    $grid-gap: 8px;
    display: grid;
    grid-auto-flow: column;
    grid-auto-rows: 1fr; /* 1 */
    grid-gap: $grid-gap;

    /*
     * How much of the last item should peek onto the page
     * With an offset of 0px, N items will fit on the page,
     * and the N+1 item will be hidden just past the screen edge
     */

    $offset: 50px;

    /*
     * Default Swatch Sizing for large screens
     */

    @media (max-width: $breakpoint-lg - .01) {
      grid-auto-columns: minmax(70px, 1fr);
    }

    /*
     * It is actually specified in rems, but we can't use calc in media queries
     * so this is the px approximation
     */

    $container-padding-left: 16px;

    $min: 2;

    /**
     * More than 9 is not necessary because then it switches to the
     * large screen breakpoint
     */

    $max: 9;

    /*
     * Generate a bunch of media queries to fully show N items plus a partial
     * item. This allows us to show a different number of items depending
     * on the screen width
     */

    @for $i from $min through $max {
      // Sass won't let me loop from max to min, so this is my workaround
      $n: $max + $min - $i;

      // The max width is when N+1 items can fit in the provided space
      @media (max-width: $container-padding-left + ($swatchObjects-basis-value + $grid-gap) * ($n + 1) + $offset) {
        /*
         * Grid-auto-columns defines the width of each item.
         * The first part is the base size of the elements. It allows there to fit N items
         * The 2nd part subtracts the grid gap, because each item has a corresponding gap
         * The last part shrinks all the items by the space required to have the N+1
         * item peek past onto the screen by the $offset amount.
         */
        grid-auto-columns: calc(#{percentage(1 / $n)} - #{$grid-gap + $offset / $n});
      }
    }
  }

  /**
   * 1. Creates optimal extra space at end or overflow scrolling row
   */

  .de-SwatchObjects::after {
    content: ''; /* 1 */
    width: 0.5em; /* 1 */
  }

  @media (min-width: $breakpoint-lg) {
    .de-SwatchObjects {
      grid-auto-flow: row;
      grid-template-columns: repeat(auto-fill, minmax(65px, 1fr));
    }

    .de-SwatchObjects::after {
      display: none;
    }
  }

  @media (min-width: $breakpoint-xl) {
    .de-SwatchObjects {
      grid-template-columns: repeat(auto-fill, minmax(96px, 1fr));
    }

    /**
    * 1. Removes extra space from layout when Grid is supported
    */

    .de-SwatchObjects:after {
      display: none; /* 1 */
    }

    .de-SwatchObjects--sm-rowGap {
      grid-row-gap: 4px;
    }
  }
}

/**
 * 1. Improves positioning of content inside element
 * 2. Warning: Magic Number at work. Provides desirable sizing for flexbox
 * fallback implementations of this pattern when `@supports (display: grid)` is
 * not available. This is different from the `min-width` value because on non-grid
 * browsers we often want the swatches to be larger than the minimum size but smaller
 * than their intrinsic size
 * 3. Required for the `de-is-soldout` styles to take effect
 * 4. Disables ability to select text inside of a SwatchObject-item
 * 5. Hides SoldOut styles from spilling out of the container
 * 6. `min-width` gets triggered for large screens that are just barely larger
 *    than the breakpoint
*/

.de-SwatchObjects-item {
  cursor: pointer;
  display: flex; /* 1 */
  flex-basis: $swatchObjects-basis-value; /* 2 */
  margin-bottom: 8px;
  margin-right: 8px;
  min-width: 72px; /* 2 */
  overflow: hidden; /* 5 */
  position: relative; /* 3 */
  user-select: none; /* 4 */
}

@supports (display: grid) {
  .de-SwatchObjects-item {
    margin: 0;
  }
}

.de-SwatchObjects-item.de-is-active {
  border: $border-width-md solid $color-blue !important;
  color: $color-blue;
}

/**
 * 1. Default `:focus` should never be removed without adding suitable alternate
 * styles. This element's `:focus` is being removed here, but styled elsewhere.
 */

.de-SwatchObjects-item:focus {
  outline: none; /* 1 */
}

/**
 * Color swatch modifier
 */

.de-SwatchObjects--color {
  border: $border-width-sm solid $color-white;
  display: block;
  height: 100%;
  margin: 0 auto;
  padding: 0.5em;
}

.de-SwatchObjects--color.de-is-soldout {
  border: $border-width-sm solid $color-gray;
  color: $color-gray;
  opacity: $swatchObjects-item-unavailable-opacity;
}

/**
 * 1. This is a unique CSS style block and the desired visual appearance
 * requires some magic numbers to display properly.
 */

.de-SwatchObjects--color.de-is-soldout::before {
  background: linear-gradient(to left top, transparent 51.5%, currentColor 43.5%, currentColor 52%, transparent 45.5%);
  bottom: -1.65em; /* 1 */
  content: '';
  left: -1.3em; /* 1 */
  pointer-events: none;
  position: absolute;
  right: -0.25em; /* 1 */
  top: 0; /* 1 */
}

.de-SwatchObjects--color:focus:not(.de-is-active) {
  outline: $border-width-md solid $color-blue;
  outline-offset: -4px;
}

.de-SwatchObjects-noimage {
  height: 100%;
  width: 100%;
}

/**
 * SwatchObject State classes
 */

.de-SwatchObjects--color.de-is-outofstock * {
  opacity: $swatchObjects-item-unavailable-opacity;
}

/**
 * 1. Required for images to be displayed in IE11
 */

.de-SwatchObjects-image {
  width: 100%;  /* 1 */
}

.de-SwatchObjects-noimage {
  width: 100%;
}

/**
 * Size swatch modifier
 *
 * 1. The desired height for the element. A minimum recommended touch target
 * size is around 48 device independent pixels on a site with a properly set
 * mobile viewport.
 *
 * @see https://developers.google.com/web/fundamentals/accessibility/accessible-styles
 */

.de-SwatchObjects--size {
  align-items: center;
  border: $border-width-sm solid $color-darkgray;
  display: flex;
  height: 48px; /* 1 */
  justify-content: center;
  line-height: 1.2;
}

/**
 * This style block requires testing
 */

.de-SwatchObjects--size:not(.de-is-active):focus {
  outline: $border-width-md solid $color-blue;
  outline-offset: -4px;
}

/**
 * `.de-is-outofstock` should be applied to `.de-SwatchObjects--size` when the
 * size variant is temporarily out of stock.
 */

.de-SwatchObjects--size.de-is-outofstock {
  background-color: $color-silver;
  border: $border-width-sm solid $color-gray;
  color: $color-gray !important;
}

/**
 * `.de-is-soldout` should be applied to `.de-SwatchObjects--size` when the size
 * variant is no longer available and will not be coming back in stock
 *
 * 1. This is a unique CSS style block and the desired visual appearance
 * requires some magic numbers to display properly.
 */

.de-SwatchObjects--size.de-is-soldout {
  background-color: $color-silver !important;
  border: $border-width-sm solid $color-gray;
  color: $color-gray !important;
}

/**
 * 1. This is a unique CSS style block and the desired visual appearance
 * requires some magic numbers to display properly.
 */

.de-SwatchObjects--size.de-is-soldout::before {
  content: '';
  position: absolute;
  left: -0.014em; /* 1 */
  right: -0.14em; /* 1 */
  top: 0.01em; /* 1 */
  bottom: 0.03em; /* 1 */
  background: linear-gradient(to left top, transparent 50.5%, currentColor 43.5%, currentColor 52.5%, transparent 45.5%);
  pointer-events: none;
}

/**
 * ProductImageGallery
 *
 * 1. `1.266rem` is equal to the second step of the modular scale in use by the
 *    Decathlon pattern library
 * 2. Required for enabling the desired `overflow-x` scrolling effect
 * 3. Enables photos with various widths to pair well together and maintain a
 *    consistent height while flexing their widths ~ Resulting in image true to
 *    their original aspect ratio
 * 4. `ProductImageGallery` inherits styles from `de-u-fullwidth`, which enables
 *    a full width container inside a limited width parents. This additional
 *    padding creates a desirable gap before and after the first and last
 *    children which improves the overflow scrolling experience.
 * 5. Enables momentum-based scrolling, where the content continues to scroll
 *    for a while after finishing the scroll gesture and removing your finger
 *    from the touchscreen. The speed and duration of the continued scrolling is
 *    proportional to how vigorous the scroll gesture was. Also creates a new
 *    stacking context. Support: Safari iOS.
 *    Setting `z-index: 1;` ensures that horizontal scroll bars will not overlap
 *    any position fixed, or sticky elements.
 */

 $product-gallery-spacing-xs: 0.5rem; /* 1 */
 $product-gallery-spacing-sm: 1rem; /* 1 */
 $product-gallery-spacing-md: 1.266rem; /* 1 */

 .ProductImageGallery {
   overflow-x: auto; /* 2 */
   overflow-y: hidden; /* 2 */
   white-space: nowrap; /* 2 */
   -webkit-overflow-scrolling: touch; /* 5 */
   z-index: 1;
 }

 .ProductImageGallery::before,
 .ProductImageGallery::after {
   content: ''; /* 4 */
   display: inline-block; /* 4 */
   width: $product-gallery-spacing-sm; /* 4 */
 }

 @media (min-width: $breakpoint-md) {
   .ProductImageGallery::before,
   .ProductImageGallery::after {
     width: $product-gallery-spacing-md; /* 4 */
   }
 }

 .ProductImageGallery-item {
   display: inline-block;
   margin-right: $product-gallery-spacing-xs;
   height: 50vw; /* 3 */
 }

 @media (min-width: $breakpoint-md) {
   .ProductImageGallery-item {
     height: 36vw; /* 3 */
     margin-right: $product-gallery-spacing-sm;
   }
 }

 .ProductImageGallery-item:last-of-type {
   margin-right: 0;
 }
