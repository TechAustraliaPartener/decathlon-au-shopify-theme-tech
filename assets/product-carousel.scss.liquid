/**
 * Color Palette
 *
 * Variable names are based on similar CSS extended color keyword values.
 *
 * @see https://www.w3.org/TR/2018/REC-css-color-3-20180619/#svg-color
 */

$color-blue: #0082c3;

/**
 * Border Width
 */

$border-width-md: 2px;

/**
 * Media Queries
 */

$breakpoint-lg: 60em;

/**
  * @TODO
  * 1. Move into `product.scss.liquid` once this work is complete
 */

.de-CarouselContainer {
  position: relative;
}

.de-ProductCarousel--large,
.de-CarouselContainer,
.de-CarouselThumbnail,
.de-CarouselFeature-image[src=''] {
  display: none;
}

.de-CarouselContainer.de-is-active,
.de-CarouselFeature-image {
  display: flex;
}

.de-CarouselFeature,
.de-CarouselFeature-image {
  width: 100%;
}

.de-CarouselFeature-slide,
.de-CarouselFeature-image {
  cursor: grab;
}

.de-CarouselFeature-btn {
  display: block;
  margin: 0 auto;
}

.de-CarouselContext {
  display: flex;
  overflow-x: auto;
}

/* Fix for "sliver" of next image showing in product image carousel */

.de-ProductCarousel,
.de-CarouselContainer {
  overflow: hidden;
}

.de-CarouselFeature {
  .slick-slide {
    position: relative;
    padding-right: 2px;
    right: -1px;
  }
}

@media (max-width: $breakpoint-lg) {
  /**
    * 1. Preserves the sqaure aspect ratio of while loading,
    *    improving the loading experience.
    * 2. Restricts image sizes from becoming too large;
    *    a preventive measure to help buybox remains above-the-fold
    */

  .de-CarouselContainer,
  .de-CarouselFeature-btn,
  .de-CarouselFeature-image {
    width: 100%; /* 1 */
    height: 100vw; /* 1 */
    max-width: 528px; /* 2 */
    max-height: 528px; /* 2 */
  }

  /**
    * 1. Setting and unsetting of this property is to take advantage
    *    the shared properties `.de-CarouselFeature-btn`, `.de-CarouselFeature-image`
    */

  .de-CarouselContainer {
    max-width: unset; /* 1 */
  }
}

@media (min-width: $breakpoint-lg) {

  /**
    * 1. Allows space for .de-ProductBuyBox;
    *    maintains sizing while .de-Drawer is open
    */

  .de-ProductCarousel--large {
    display: unset;
    width: 55vw;  /* 1 */
  }

  .de-CarouselContainer.de-is-active {
    justify-content: flex-end;
    position: relative;
  }

  /**
    * 1. Allows space for .de-CarouselThumbnail, plus a 1% gap.
    * 2. Prevents slides to show before Slick Carousel is initiated.
    */

  .de-CarouselFeature.de-is-active {
    padding-left: 17%; /* 1 */
    overflow: hidden; /* 2 */
  }

  /**
    * 1. Allows space for .de-CarouselThumbnail;
    *    45.65vw is derived by (55vw - (55vw * 17%)).
    *    55vw is the container size, 17% allows room for thumbnails.
    *    Value is applied to height to respect sqaure aspect ratio.
    *    Enforces height while image is loading.
    * 2. Fill in available space.
    */
  .de-CarouselFeature.de-is-active,
  .de-CarouselFeature-slide,
  .de-CarouselFeature-btn,
  .de-CarouselFeature-image {
    height: 45.65vw; /* 1 */
    width: 100%; /* 2 */
  }

  /**
    * 1. Allows height to match container's own,
    *    with a width less than the padding of .de-CarouselFeature.
    */

  .de-CarouselThumbnail {
    display: unset;
    height: 100%;
    left: 0;
    overflow: hidden;
    position: absolute;
    top: 0;
    width: 16%; /* 1 */
  }

  /**
    * 1. Allows space for .de-CarouselFeature;
    *    8.8vw is derived by 55vw * 16%.
    *    55vw is the container size, 16% is permitted thumbnails width.
    *    Value is applied to both width/height to respect sqaure aspect ratio.
    */

  .de-CarouselThumbnail-image {
    border: $border-width-md solid transparent;
    height: 8.8vw; /* 1 */
    object-fit: cover;
    object-position: center;
    width: 8.8vw; /* 1 */
  }

  .slick-vertical .slick-slide {
    border: $border-width-md solid transparent;
  }

  .de-SlickSlide.slick-current {
    border: $border-width-md solid $color-blue;
  }

  /*
   * 1. The current slide/image already gets a custom outline, so this
   *    is to remove the outline (for this slide only) now that the slides
   *    get tab focus
   */

  .de-SlickSlide.slick-current .de-CarouselThumbnail-btn {
    outline: none; /* 1 */
  }
}

.de-CarouselControls--overlay {
  bottom: 0;
  position: absolute;
}
