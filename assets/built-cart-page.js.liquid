import{V as e}from"./built-vue.esm-b00b619e.js";e.config.errorHandler=function(e,t,a){var r=CartJS.cart||window.vars.cartPayload,o={attributes:r.attributes,item_count:r.item_count,token:r.token,items:r.items.map((function(e){return{title:e.title,handle:e.handle,product_id:e.product_id,variant_id:e.variant_id,variant_options:e.variant_options,url:e.url}}))};console.log("Vue error",e),Rollbar.error("Vue error",{err:e,cart:JSON.stringify(o)},(function(e,t){e?console.log("Error while reporting error to Rollbar: ",e):console.log("Error successfully reported to Rollbar. UUID:",t.result.uuid)})),"/cart"===window.location.pathname&&(console.log({event:"cart_clear",cart:CartJS.cart||window.vars.cartPayload,err:e,vm:t,info:a}),Rollbar.error("Cart clear triggered",{cart:JSON.stringify(o),err:e,vm:t,info:a},(function(e,t){e?console.log("Error while reporting error to Rollbar: ",e):console.log("Error successfully reported to Rollbar. UUID:",t.result.uuid),CartJS.clear({success:function(){window.location.reload()}})})))};var t=!1,a=!1,r=window.masterStores.map((function(e){return e.name})),o=function(e){return{available:0,distance:0,id:"0",inStock:0,name:e,pickupOption:!1}},i=window.masterStores.map((function(e){return o(e.name)})),n={name:"Delivery",ready:"Unavailable for delivery",available:0,inStock:0,availability:{class:"out",text:"Out of Stock"},hours:"2-6 day delivery in Metro areas"};function l(e,t){e.locations=e.locations.filter((function(e){return-1!==r.indexOf(e.name)}));var a,i=e.locations.filter((function(e){return-1!==window.onlineInventoryStores.indexOf(e.name)}));if(i.length>0){var n=i.map((function(e){return e.available})).reduce((function(e,t){return e+t}),0);a={name:"Delivery",available:n,inStock:n>0?1:0,hours:"2-6 day delivery in Metro areas",availability:{class:n>2?"in":n>0?"low":"out",text:n>2?"In Stock":n>0?"Low Stock":"Out of Stock"},ready:n>0?"Available for delivery":"Unavailable for delivery"}}else a={name:"Delivery",ready:"Unavailable for delivery",available:0,inStock:0,availability:{class:"out",text:"Out of Stock"},hours:"2-6 day delivery in Metro areas"};e.delivery=a,console.log(e,t),window.masterStores.filter((function(e){return e.duplicate})).forEach((function(a){if(!e.locations.find((function(e){return e.name===a.name}))){var r=e.locations.find((function(e){return e.name===a.duplicate}));if(r&&"Genesis"!==r.name&&t.grams<=22e3){var o=JSON.parse(JSON.stringify(r));o.name=a.name,e.locations.push(o)}}}));for(var l=function(){var t=window.masterStores[s];e.locations.find((function(e){return e.name===t.name}))||e.locations.push(o(t.name))},s=window.masterStores.length-1;s>=0;s--)l()}function s(e){console.log(e,a);for(var t=e.items.length-1;t>=0;t--){var r=e.items[t];if(a[r.product_id]&&a[r.product_id].product.variants[r.variant_id]){var o=a[r.product_id].product.variants[r.variant_id].inventoryItem;l(o,r),r.delivery=o.delivery,r.locations=o.locations}else console.log(t,"No locations info for "+r.title),Rollbar.warning("Empty Inventory Item assigned",{title:r.title,product_id:r.product_id,variant_id:r.variant_id,url:r.url}),r.locations=JSON.parse(JSON.stringify(i)),r.delivery=n}return e}function c(){t&&a&&(window.cartDisplay=new e({el:"#cartDisplay",data:{cart:s(JSON.parse(JSON.stringify(t))),masterStores:window.masterStores,pickupStores:window.masterStores.filter((function(e){return-1!==window.ccStores.indexOf(e.name)})),favStore:window.vars.favStore||{},deliveryOption:window.vars.deliveryOption,override:!1},methods:{changeWholeData:function(t,a){var r=a?this.$data[a]:this.$data;Object.keys(r).forEach((function(e){return r[e]=null})),Object.entries(t).forEach((function(t){return e.set(r,t[0],t[1])})),this.$data.override&&setTimeout((function(){jQuery(".checkout-btn").click()}),300)},money:function(e){return"$"+(e/100).toFixed(2)},updateQuantity:function(e,t){console.log(e,t),CartJS.updateItem(e,t)},setFavStore:function(e){var t=window.masterStores.find((function(t){return t.id===e.target.value}));t&&(localStorage.setItem("favoritedStore",JSON.stringify(t)),window.vars.favStore=JSON.parse(localStorage.getItem("favoritedStore")),this.changeWholeData(window.vars.favStore,"favStore"),localStorage.setItem("deliveryOption","Click & Collect"),window.vars.deliveryOption=localStorage.getItem("deliveryOption")||"Delivery",this.$data.deliveryOption=window.vars.deliveryOption)},setDeliveryOption:function(e){localStorage.setItem("deliveryOption",e.target.value),window.vars.deliveryOption=localStorage.getItem("deliveryOption")||"Delivery",this.$data.deliveryOption=window.vars.deliveryOption},checkAvailability:function(e){var t=this;if(!e.locations)return"out";var a=e.delivery;return"Delivery"!==t.deliveryOption&&(a=e.locations.find((function(e){return e.name===t.favStore.name}))),a.inStock>0?"in":"out"},currentMax:function(e){var t=this,a=e.delivery;return"Delivery"!==t.deliveryOption&&(a=e.locations.find((function(e){return e.name===t.favStore.name}))),a.available},deliveryMax:function(e){var t=e.delivery;return console.log("Delivery",t.available),t.available},favStoreMax:function(e){var t=this,a=e.locations.find((function(e){return e.name===t.favStore.name}));return console.log("favStore",a.available),a?a.available:0},availabilityMessages:function(e){var t=[],a=this,r=e.delivery;if(t.push('<div class="'+(r.inStock?e.quantity<=r.available?"available":"low":"unavailable")+'"><p>'+(r.inStock?e.quantity<=r.available?"Available":"Not all items available":"Unavailable")+" for delivery</p></div>"),a.favStore&&a.favStore.name){var o=e.locations.find((function(e){return e.name===a.favStore.name}));t.push('<div class="'+(o.inStock?e.quantity<=o.available?"available":"low":"unavailable")+'"><p>'+(o.inStock?e.quantity<=o.available?"Available":"Not all items available":"Unavailable")+" for click & collect</p></div>")}return t.join("")},cartModificationsMessage:function(){for(var e=this,t=e.$data.cart.items,a=0,r=t.length-1;r>=0;r--){var o=t[r],i=o.delivery;"Delivery"!==e.deliveryOption&&(i=o.locations.find((function(t){return t.name===e.favStore.name}))),i.inStock<1&&a++}return a>0?a+" "+(a>1?"items":"item")+" unavailable for "+e.deliveryOption+" will be removed from your cart":""},prepareCart:function(e){var t=this;if(t.override)return!0;for(var a={},r=t.cart.items.length-1;r>=0;r--){var o=t.cart.items[r],i=t.currentMax(o);o.quantity>i&&(a[o.variant_id]=i)}return"{}"===JSON.stringify(a)||(e.preventDefault(),CartJS.updateItemQuantitiesById(a,{success:function(){t.$data.override=!0}}),!1)}}}),jQuery(".de-u-fade").addClass("in"),jQuery("#cartSpinner").addClass("de-u-hidden"))}function d(e,t,a){jQuery(".cart-"+a+"-info").toggleClass("de-u-hidden",e<t),jQuery(".cart-"+a+"-disabled-info").toggleClass("de-u-hidden",e>=t)}jQuery(document).on("cart.ready",(function(e,a){t=a,console.log("CART READY",e,a),c()})),document.addEventListener("tomitLoaded",(function(){window.tomitProductInventoryInfo.getProductsInventoryInformation(window.vars.tomitCartPayload).then((function(e){a=e,console.log("INV READY",e),c()}))})),jQuery(document).on("cart.requestComplete",(function(e,t){window.cartDisplay.changeWholeData(s(t),"cart"),jQuery(".js-de-cart__subtotal").text(Shopify.formatMoney(t.total_price)),jQuery(".afterpay-info strong").text(Shopify.formatMoney(t.total_price/4)),jQuery("#CartCount").text(t.item_count),window.vars.thresholdForGateways.afterpay.enabled&&window.vars.thresholdForGateways.afterpay.threshold&&t&&d(t.total_price,100*window.vars.thresholdForGateways.afterpay.threshold,"afterpay"),window.vars.thresholdForGateways.zipPay.enabled&&window.vars.thresholdForGateways.zipPay.threshold&&t&&d(t.total_price,100*window.vars.thresholdForGateways.zipPay.threshold,"zip-pay")}));
