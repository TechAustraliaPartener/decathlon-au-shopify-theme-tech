import{C as e}from"./built-toConsumableArray-0fbe23f7.js";jQuery(document).ready((function(){jQuery("#accountInfo input, #accountEdit input").on("change",(function(){var e=jQuery(this),r=jQuery('#customer-fields input[name="'+e.attr("name")+'"]');if(r.length>0)if("checkbox"===e.attr("type"))r.prop("checked",e.prop("checked"));else if("select"===e.attr("type"))r.val(e.val());else{var t=e.data("prefix"),a=t?t+e.val():e.val();r.val(a)}})),jQuery("#accountInfo select, #accountEdit select").on("change",(function(){var e=jQuery(this),r=jQuery('#customer-fields select[name="'+e.attr("name")+'"]');r.length>0&&r.val(e.val());var t=jQuery('#customer-fields input[name="'+e.attr("name")+'"]');t.length>0&&t.val(e.val())}));var r=document.getElementById("google_address"),t=new google.maps.places.Autocomplete(r,{types:["address"],componentRestrictions:{country:"au"}});t.addListener("place_changed",(function(){var e,r,a,n,s,o;t.getPlace().address_components.forEach((function(t){t.types.includes("street_number")&&(e=t.long_name),t.types.includes("route")&&(r=t.long_name),t.types.includes("locality")&&(a=t.long_name),t.types.includes("administrative_area_level_2")&&(n=t.long_name),t.types.includes("administrative_area_level_1")&&(s=t.long_name),t.types.includes("postal_code")&&(o=t.long_name)})),jQuery('input[name="customer[addresses][][address1]"]').val(e+" "+r),jQuery('input[name="customer[addresses][][city]"]').val(a+", "+n),jQuery('input[name="customer[postcode]"]').val(""+o),jQuery('select[name="customer[addresses][][province]"]').val(s)})),jQuery("#accountInfo form").find("input, select").trigger("change"),window.addSpace=function(e){e.val(e.val()+" ")},jQuery(".general-popup .modal_close").on("click",(function(){var e=jQuery(this).parents(".general-popup");e.hide(),"welcomePopup"===e.attr("id")&&location.reload()})),jQuery(".general-popup .modal_background").on("click",(function(){var e=jQuery(this).parents(".general-popup");e.hide(),"welcomePopup"===e.attr("id")&&location.reload()})),jQuery("[data-open-popup]").on("click",(function(){jQuery(jQuery(this).attr("href")).show()})),jQuery("#accountEdit").length>0&&jQuery(".edit-form .birthday_wrap").hide(),jQuery('input[name="customer[addresses][][phone]"]').on("input",(function(){this.value=parseInt(this.value.replace(/[^0-9]/g,""),10)||""})),jQuery('input[name="customer[postcode]"]').on("input",(function(){this.value=parseInt(this.value.replace(/[^0-9]/g,""),10)||""})),jQuery("[data-submit]").on("submit",(function(r){var t=!1,a=jQuery('input[name="customer[email]"]'),n=jQuery('.copy-create input[name="customer[first_name]"]'),s=jQuery('.copy-create input[name="customer[last_name]"]'),o=(jQuery('.copy-create select[name="customer[gender]"]'),jQuery('.copy-create select[name="customer[addresses][][province]"]'),jQuery('.copy-create input[name="customer[addresses][][city]"]')),c=jQuery('.copy-create select[name="customer[preferred_store]"]'),u=jQuery('.copy-create input[name="customer[birthday]"]'),i=jQuery('.copy-create input[name="customer[addresses][][phone]"]'),d=jQuery('.copy-create input[name="customer[addresses][][address1]"]'),l=jQuery('.copy-create input[name="customer[postcode]"]'),p=jQuery('.copy-create input[name="customer[accepts_terms_conditions]"]'),m=(jQuery('.copy-create input[name="customer[accepts_marketing]"]'),jQuery('#customer-fields input[name="customer[accepts_marketing]"]')),y=jQuery('.copy-create select[name="customer[gender]"]'),j=jQuery('.copy-create select[name="customer[addresses][][province]"]');if(r.preventDefault(),jQuery(jQuery(this).data("submit")).length>0&&(n.val()?n.removeClass("error"):(n.addClass("error"),t=!0),s.val()?s.removeClass("error"):(s.addClass("error"),t=!0),y.find("option:selected").prop("disabled")?(y.addClass("error"),t=!0):y.removeClass("error"),u.val()?u.removeClass("error"):(u.addClass("error"),t=!0),i.val()?i.removeClass("error"):(i.addClass("error"),t=!0),d.val()?d.removeClass("error"):(d.addClass("error"),t=!0),l.val()?l.removeClass("error"):(l.addClass("error"),t=!0),c.val()?c.removeClass("error"):(c.addClass("error"),t=!0),j.find("option:selected").prop("disabled")?(j.addClass("error"),t=!0):j.removeClass("error"),o.val()?o.removeClass("error"):(o.addClass("error"),t=!0),p.is(":checked")?p.removeClass("error"):(p.addClass("error"),t=!0),!t)){var Q=window.vars.customerEmail;if(m.is(":checked")){var v=new Date((new Date).getTime()+3e5);e.set("optedInAt",Q,{expires:v})}a.val(Q),jQuery(jQuery(this).data("submit")).submit()}})),jQuery("#editDetails").click((function(e){e.preventDefault(),jQuery("#detailsDisplay").fadeOut(200,(function(){jQuery("#accountEdit").fadeIn()})),jQuery("#accountEdit form").find("input, select").trigger("change")})),jQuery("#updateMarketing").click((function(e){e.preventDefault(),jQuery("[data-marketing-hide]").hide(),jQuery("[data-marketing-show]").show(),jQuery("#detailsDisplay").fadeOut(200,(function(){jQuery("#accountEdit").fadeIn()})),jQuery("#accountEdit form").find("input, select").trigger("change")})),jQuery("#cancelEditAccount").click((function(e){e.preventDefault(),jQuery("#accountEdit").fadeOut(200,(function(){jQuery("[data-marketing-hide]").show(),jQuery("[data-marketing-show]").hide(),jQuery("#detailsDisplay").fadeIn()})),jQuery("#accountInfo form").find("input, select").trigger("change")})),jQuery(".show_edit_form").click((function(e){e.preventDefault(),jQuery("#editDetails").click()})),jQuery("input, select").on("blur",(function(){jQuery(this).removeClass("error")}));var a=window.vars,n=a.showDetailsForm,s=a.customerEmail,o=e.get("optedInAt")===s;n&&!o?(jQuery("#accountInfo").addClass("in"),jQuery(".grid__item.fade").remove()):(jQuery("#accountInfo").remove(),jQuery(".grid__item").addClass("in"))}));
