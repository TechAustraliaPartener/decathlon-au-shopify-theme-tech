// Import $ from 'jquery';
import Vue from 'vue/dist/vue.esm.js';

// Const product = productJSON;
window.inventories = {
  29944901894243: {
    id: 29944901894243,
    sku: '272636',
    title: 'Blue / EU S - M / 8304664',
    inventoryItem: {
      id: 30493896736879,
      locations: [
        {
          id: 10324541551,
          name: 'Tempe',
          available: 17,
          pickupOption: true,
          inStock: 1,
          distance: 0
        },
        {
          id: 15685779567,
          name: 'Auburn',
          available: 76,
          pickupOption: true,
          inStock: 1,
          distance: 0
        },
        {
          id: 15685845103,
          name: 'Box Hill',
          available: 64,
          pickupOption: true,
          inStock: 1,
          distance: 0
        },
        {
          id: 15685812335,
          name: 'Knoxfield',
          available: 28,
          pickupOption: true,
          inStock: 1,
          distance: 0
        },
        {
          id: 15685812335,
          name: 'Moorabbin',
          available: 28,
          pickupOption: true,
          inStock: 1,
          distance: 0
        }
      ]
    }
  },
  29944901828707: {
    id: 29944901828707,
    sku: '2046934',
    title: 'Blue / EU M - L / 8304664',
    inventoryItem: {
      id: 30493896769647,
      locations: [
        {
          id: 10324541551,
          name: 'Tempe',
          available: 8,
          pickupOption: true,
          inStock: 1,
          distance: 0
        },
        {
          id: 15685779567,
          name: 'Auburn',
          available: 55,
          pickupOption: true,
          inStock: 1,
          distance: 0
        },
        {
          id: 15685845103,
          name: 'Box Hill',
          available: 38,
          pickupOption: true,
          inStock: 1,
          distance: 0
        },
        {
          id: 15685812335,
          name: 'Knoxfield',
          available: 20,
          pickupOption: true,
          inStock: 1,
          distance: 0
        },
        {
          id: 15685812335,
          name: 'Moorabbin',
          available: 20,
          pickupOption: true,
          inStock: 1,
          distance: 0
        }
      ]
    }
  },
  29944901927011: {
    id: 29944901927011,
    sku: '677982',
    title: 'LIGHT PINK / EU XS / 8315702',
    inventoryItem: {
      id: 30607042674799,
      locations: []
    }
  },
  29944901861475: {
    id: 29944901861475,
    sku: '328449',
    title: 'LIGHT PINK / EU S - M / 8315702',
    inventoryItem: {
      id: 30607042707567,
      locations: [
        {
          id: 10324541551,
          name: 'Tempe',
          available: 29,
          pickupOption: true,
          inStock: 1,
          distance: 0
        },
        {
          id: 15685779567,
          name: 'Auburn',
          available: 47,
          pickupOption: true,
          inStock: 1,
          distance: 0
        },
        {
          id: 15685845103,
          name: 'Box Hill',
          available: 17,
          pickupOption: true,
          inStock: 1,
          distance: 0
        },
        {
          id: 15685812335,
          name: 'Knoxfield',
          available: 20,
          pickupOption: true,
          inStock: 1,
          distance: 0
        },
        {
          id: 15685812335,
          name: 'Moorabbin',
          available: 20,
          pickupOption: true,
          inStock: 1,
          distance: 0
        }
      ]
    }
  },
  29944906547299: {
    id: 29944906547299,
    sku: '2046933',
    title: 'LIGHT PINK / EU M - L / 8315702',
    inventoryItem: {
      id: 30607042740335,
      locations: [
        {
          id: 10324541551,
          name: 'Tempe',
          available: 59,
          pickupOption: true,
          inStock: 1,
          distance: 0
        },
        {
          id: 15685779567,
          name: 'Auburn',
          available: 116,
          pickupOption: true,
          inStock: 1,
          distance: 0
        },
        {
          id: 15685845103,
          name: 'Box Hill',
          available: 298,
          pickupOption: true,
          inStock: 1,
          distance: 0
        },
        {
          id: 15685812335,
          name: 'Knoxfield',
          available: 242,
          pickupOption: true,
          inStock: 1,
          distance: 0
        },
        {
          id: 15685812335,
          name: 'Moorabbin',
          available: 242,
          pickupOption: true,
          inStock: 1,
          distance: 0
        }
      ]
    }
  },
  29944906154083: {
    id: 29944906154083,
    sku: '2647610',
    title: 'DARK BLUE / EU S - M / 8526111',
    inventoryItem: {
      id: 30607042773103,
      locations: [
        {
          id: 10324541551,
          name: 'Tempe',
          available: 19,
          pickupOption: true,
          inStock: 1,
          distance: 0
        },
        {
          id: 15685779567,
          name: 'Auburn',
          available: 20,
          pickupOption: true,
          inStock: 1,
          distance: 0
        },
        {
          id: 15685845103,
          name: 'Box Hill',
          available: 26,
          pickupOption: true,
          inStock: 1,
          distance: 0
        },
        {
          id: 15685812335,
          name: 'Knoxfield',
          available: 19,
          pickupOption: true,
          inStock: 1,
          distance: 0
        },
        {
          id: 15685812335,
          name: 'Moorabbin',
          available: 19,
          pickupOption: true,
          inStock: 1,
          distance: 0
        }
      ]
    }
  },
  29944906645603: {
    id: 29944906645603,
    sku: '2647609',
    title: 'DARK BLUE / EU M - L / 8526111',
    inventoryItem: {
      id: 30607042838639,
      locations: [
        {
          id: 10324541551,
          name: 'Tempe',
          available: 26,
          pickupOption: true,
          inStock: 1,
          distance: 0
        },
        {
          id: 15685779567,
          name: 'Auburn',
          available: 16,
          pickupOption: true,
          inStock: 1,
          distance: 0
        },
        {
          id: 15685845103,
          name: 'Box Hill',
          available: 28,
          pickupOption: true,
          inStock: 1,
          distance: 0
        },
        {
          id: 15685812335,
          name: 'Knoxfield',
          available: 14,
          pickupOption: true,
          inStock: 1,
          distance: 0
        },
        {
          id: 15685812335,
          name: 'Moorabbin',
          available: 14,
          pickupOption: true,
          inStock: 1,
          distance: 0
        }
      ]
    }
  },
  29944906317923: {
    id: 29944906317923,
    sku: '2459823',
    title: 'NAVY BLUE / EU S - M / 8514879',
    inventoryItem: {
      id: 30607042871407,
      locations: [
        {
          id: 10324541551,
          name: 'Tempe',
          available: 1,
          pickupOption: true,
          inStock: 1,
          distance: 0
        },
        {
          id: 15685845103,
          name: 'Box Hill',
          available: 2,
          pickupOption: true,
          inStock: 1,
          distance: 0
        }
      ]
    }
  },
  29944911036515: {
    id: 29944911036515,
    sku: '2459822',
    title: 'NAVY BLUE / EU M - L / 8514879',
    inventoryItem: {
      id: 30607042904175,
      locations: [
        {
          id: 10324541551,
          name: 'Tempe',
          available: 4,
          pickupOption: true,
          inStock: 1,
          distance: 0
        },
        {
          id: 15685845103,
          name: 'Box Hill',
          available: 13,
          pickupOption: true,
          inStock: 1,
          distance: 0
        },
        {
          id: 15685812335,
          name: 'Knoxfield',
          available: 12,
          pickupOption: true,
          inStock: 1,
          distance: 0
        },
        {
          id: 15685812335,
          name: 'Moorabbin',
          available: 12,
          pickupOption: true,
          inStock: 1,
          distance: 0
        }
      ]
    }
  },
  29944910544995: {
    id: 29944910544995,
    sku: '2398074',
    title: 'AQUAMARINE / EU ML / 8401951',
    inventoryItem: {
      id: 30607042936943,
      locations: [
        {
          id: 10324541551,
          name: 'Tempe',
          available: 13,
          pickupOption: true,
          inStock: 1,
          distance: 0
        },
        {
          id: 15685779567,
          name: 'Auburn',
          available: 19,
          pickupOption: true,
          inStock: 1,
          distance: 0
        },
        {
          id: 15685845103,
          name: 'Box Hill',
          available: 14,
          pickupOption: true,
          inStock: 1,
          distance: 0
        },
        {
          id: 15685812335,
          name: 'Knoxfield',
          available: 9,
          pickupOption: true,
          inStock: 1,
          distance: 0
        },
        {
          id: 15685812335,
          name: 'Moorabbin',
          available: 9,
          pickupOption: true,
          inStock: 1,
          distance: 0
        }
      ]
    }
  },
  29944911102051: {
    id: 29944911102051,
    sku: '2398075',
    title: 'AQUAMARINE / EU S - M / 8401951',
    inventoryItem: {
      id: 30607042969711,
      locations: [
        {
          id: 10324541551,
          name: 'Tempe',
          available: 6,
          pickupOption: true,
          inStock: 1,
          distance: 0
        },
        {
          id: 15685779567,
          name: 'Auburn',
          available: 13,
          pickupOption: true,
          inStock: 1,
          distance: 0
        },
        {
          id: 15685845103,
          name: 'Box Hill',
          available: 16,
          pickupOption: true,
          inStock: 1,
          distance: 0
        },
        {
          id: 15685812335,
          name: 'Knoxfield',
          available: 14,
          pickupOption: true,
          inStock: 1,
          distance: 0
        },
        {
          id: 15685812335,
          name: 'Moorabbin',
          available: 14,
          pickupOption: true,
          inStock: 1,
          distance: 0
        }
      ]
    }
  },
  29944914706531: {
    id: 29944914706531,
    sku: '2398072',
    title: 'PINK / EU ML / 8401950',
    inventoryItem: {
      id: 30607043002479,
      locations: [
        {
          id: 10324541551,
          name: 'Tempe',
          available: 50,
          pickupOption: true,
          inStock: 1,
          distance: 0
        },
        {
          id: 15685779567,
          name: 'Auburn',
          available: 26,
          pickupOption: true,
          inStock: 1,
          distance: 0
        },
        {
          id: 15685845103,
          name: 'Box Hill',
          available: 12,
          pickupOption: true,
          inStock: 1,
          distance: 0
        },
        {
          id: 15685812335,
          name: 'Knoxfield',
          available: 16,
          pickupOption: true,
          inStock: 1,
          distance: 0
        },
        {
          id: 15685812335,
          name: 'Moorabbin',
          available: 16,
          pickupOption: true,
          inStock: 1,
          distance: 0
        }
      ]
    }
  },
  29944914575459: {
    id: 29944914575459,
    sku: '2398073',
    title: 'PINK / EU S - M / 8401950',
    inventoryItem: {
      id: 30607043035247,
      locations: [
        {
          id: 10324541551,
          name: 'Tempe',
          available: 18,
          pickupOption: true,
          inStock: 1,
          distance: 0
        },
        {
          id: 15685779567,
          name: 'Auburn',
          available: 20,
          pickupOption: true,
          inStock: 1,
          distance: 0
        },
        {
          id: 15685845103,
          name: 'Box Hill',
          available: 10,
          pickupOption: true,
          inStock: 1,
          distance: 0
        },
        {
          id: 15685812335,
          name: 'Knoxfield',
          available: 6,
          pickupOption: true,
          inStock: 1,
          distance: 0
        },
        {
          id: 15685812335,
          name: 'Moorabbin',
          available: 6,
          pickupOption: true,
          inStock: 1,
          distance: 0
        }
      ]
    }
  }
};

function addMasterStoresData(inventoryItem) {
  for (let i = window.masterStores.length - 1; i >= 0; i--) {
    const masterLoc = window.masterStores[i];

    const thisloc = inventoryItem.locations.find(obj => {
      return obj.name === masterLoc.name;
    });

    if (thisloc) {
      if (thisloc.name === 'Tempe') {
        const delivery = {
          name: 'Delivery'
        };
        delivery.ready = 'Available for delivery';
        if (thisloc.available > 2) {
          delivery.availability = {
            class: 'in',
            text: 'In Stock'
          };
        } else if (thisloc.available > 0) {
          delivery.availability = {
            class: 'low',
            text: 'Low Stock'
          };
        } else {
          delivery.availability = {
            class: 'out',
            text: 'Out of Stock'
          };
        }
        delivery.hours = '2-6 day delivery in Metro areas';
        console.log(1, delivery);
        inventoryItem.delivery = delivery;
      }

      thisloc.ready = 'Ready to collect in 2 hours';

      if (thisloc.available > 2) {
        thisloc.availability = {
          class: 'in',
          text: 'In Stock'
        };
      } else if (thisloc.available > 0) {
        thisloc.availability = {
          class: 'low',
          text: 'Low Stock'
        };
      } else {
        thisloc.availability = {
          class: 'out',
          text: 'Out of Stock'
        };
      }

      thisloc.hours = masterLoc.street2;

      console.log(2, thisloc);
    } else {
      if (masterLoc.name === 'Tempe') {
        inventoryItem.delivery = {
          name: 'Delivery',
          ready: 'Unavailable for delivery',
          availability: {
            class: 'out',
            text: 'Out of Stock'
          },
          hours: '2-6 day delivery in Metro areas'
        };
      }

      console.log(3, inventoryItem.delivery);

      const thisloc = {
        name: masterLoc.name,
        ready: 'Unavailable',
        availability: {
          class: 'out',
          text: 'Out of Stock'
        },
        hours: masterLoc.street2
      };

      console.log(4, thisloc);

      inventoryItem.locations.push(thisloc);
    }
  }

  inventoryItem.locations.sort((a, b) =>
    a.name > b.name ? 1 : b.name > a.name ? -1 : 0
  );
  return inventoryItem;
}

/**
 * Attach listeners to open collapse elements
 */
const initInventoryLocations = () => {
  window.inventoryLocationsDisplay = new Vue({
    el: '#inventoryLocs',
    data: addMasterStoresData(window.inventories[29944901894243].inventoryItem),
    methods: {
      changeWholeData(newData) {
        Object.keys(this.$data).forEach(key => (this.$data[key] = null));
        Object.entries(newData).forEach(entry =>
          Vue.set(this.$data, entry[0], entry[1])
        );
      },
      changeVariant(variant) {
        this.changeWholeData(
          addMasterStoresData(window.inventories[variant].inventoryItem)
        );
      }
    }
  });
};

/**
 * Put all functions that need to run on product-page load here
 */
export const init = () => {
  initInventoryLocations();
};
