{% case template %}
  {% when 'index' %}
    <script defer type="module" src="{{ 'built-home.js' | asset_url }}"></script>
    <script defer nomodule src="{{ 'built-home-legacy.js' | asset_url }}"></script>
  {% when 'product' %}
    {% if product.metafields.global.features == blank %}
      {% comment %} Legacy Product Page {% endcomment %}
      <script defer type="module" src="{{ 'built-legacy-product-page.js' | asset_url }}"></script>
      <script defer nomodule src="{{ 'built-legacy-product-page-legacy.js' | asset_url }}"></script>
    {% else %}
      {% comment %} Modern Product Page {% endcomment %}
      {% comment %}
        Store Pickup Script(s)
        @TODO Install as npm packages. With the current rollup configuration,
        'moment-timezone.js' throws an error, requiring the use of 'rollup-plugin-json'.
        @see https://github.com/decathlon-usa/shopify-theme-decathlonusa/pull/441#discussion_r290511357
      {% endcomment %}
      {% include 'moment.js' %}
      {% include 'moment-timezone.js' %}
      <script defer type="module" src="{{ 'built-product-page.js' | asset_url }}"></script>
      <script defer nomodule src="{{ 'built-product-page-legacy.js' | asset_url }}"></script>
    {% endif %}
  {% when 'customers/account' %}
    {% if settings.extra_details == 'customer_fields' %}
      <script defer src="{{ 'built-customer-fields.js' | asset_url }}"></script>
    {% endif %}
  {% when 'cart' %}
    <script defer type="module" src="{{ 'built-cart-page.js' | asset_url }}"></script>
    <script defer nomodule src="{{ 'built-cart-page.js' | asset_url }}"></script>
{% endcase %}